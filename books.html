<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bookstore</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body class="bg-light">
    <nav>
      <div id="nav-left">
        <button id="home-btn">Home</button>
        <button id="books-btn">Books</button>
      </div>
      <div id="nav-right">
        <button id="logout-btn">Logout</button>
      </div>
    </nav>

    <div class="container mt-5">
      <h1 class="display-4 text-center text-dark">Google Books</h1>
      <div class="card text-white bg-dark mb-3">
        <div class="card-header">Search for Books</div>
        <div class="card-body">
          <h4 class="card-title">Type a book title below</h4>
          <input
            type="text"
            class="form-control"
            id="search-input"
            placeholder="Enter book title"
          />
          <button class="btn btn-primary mt-2" id="search-btn">Search</button>
        </div>
      </div>

      <div id="book-grid" class="row mt-4">
        <!-- Book results will be inserted here -->
      </div>
    </div>

    <script src="script.js"></script>
    <script type="text/javascript" src="https://www.google.com/books/jsapi.js"></script>
    <script>
      // Load Google Books API
      google.books.load({ language: "en" });

      // Event listener for search button
      document.getElementById("search-btn").addEventListener("click", function () {
        const query = document.getElementById("search-input").value;
        if (query) {
          searchBooks(query);
        }
      });

     function searchBooks(query) {
  const url = `https://www.googleapis.com/books/v1/volumes?q=${query}`;
  fetch(url)
    .then(response => response.json())
    .then(data => {
      const books = data.items;
      displayBooks(books);
    })
    .catch(error => {
      console.error('Error fetching books:', error);
    });
}


      // Function to display books on the page
      function displayBooks(books) {
        const bookGrid = document.getElementById("book-grid");
        bookGrid.innerHTML = ""; // Clear previous results

        books.forEach(book => {
          const bookTitle = book.volumeInfo.title;
          const bookAuthors = book.volumeInfo.authors ? book.volumeInfo.authors.join(", ") : "Unknown Author";
          const bookImage = book.volumeInfo.imageLinks ? book.volumeInfo.imageLinks.thumbnail : 'https://via.placeholder.com/128x192';

          const bookElement = document.createElement("div");
          bookElement.classList.add("col-md-4", "mb-4");

          bookElement.innerHTML = `
            <div class="card" style="width: 18rem;">
              <img src="${bookImage}" class="card-img-top" alt="${bookTitle}" />
              <div class="card-body">
                <h5 class="card-title">${bookTitle}</h5>
                <p class="card-text">by ${bookAuthors}</p>
                <a href="https://books.google.com/books?id=${book.id}" target="_blank" class="btn btn-primary">Read More</a>
              </div>
            </div>
          `;
          bookGrid.appendChild(bookElement);
        });
      }
    </script>
  </body>
</html>
